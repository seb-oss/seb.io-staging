"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{3784:(t,e,n)=>{n.d(e,{HA:()=>k,HZ:()=>C,oh:()=>F});var a=n(7620);let o=(0,a.createContext)({isLoaded:!1,store:{pages:[],components:[],templates:[],snippets:[],navigation:[],lastUpdated:""},actions:{getPage:()=>void 0,getComponent:()=>void 0,getComponents:()=>[],getPages:()=>[],getTemplates:()=>[],getTemplate:()=>void 0,getSnippet:()=>void 0,getSnippets:()=>[],getNavigation:()=>void 0,getNavigations:()=>[],getMenuItems:()=>[],refresh:async()=>{}}});var i=n(4568);n(2942);let r="https://api.seb.io";async function s(){let t=await fetch("".concat(r,"/components/components.json"));if(!t.ok)throw Error("Failed to fetch components list");return t.json()}async function c(t){let e=await fetch("".concat(r,"/components/").concat(t,"/").concat(t,".images.json"));if(!e.ok){if(404===e.status)return[];throw Error("Failed to fetch component images: ".concat(t))}return(await e.json()).nodes||[]}async function l(t){let e=await fetch("".concat(r,"/components/").concat(t,"/").concat(t,".list.json"));if(!e.ok){if(404===e.status)return{};throw Error("Failed to fetch icon list: ".concat(t))}return e.json()}async function d(t){let e,n=await fetch("".concat(r,"/").concat(t));if(!n.ok)throw Error("Failed to fetch component content: ".concat(t));let a=await n.json(),o=t.split("/")[1];if("icon"===o)try{e=await l(o)}catch(t){console.warn("Failed to fetch icon list:",t)}let i=[];try{i=await c(o)}catch(t){console.warn("Failed to fetch images for component ".concat(o,":"),t)}return{...a,type:"component",createdAt:a.createdAt||new Date().toISOString(),updatedAt:a.updatedAt||new Date().toISOString(),images:i,icons:e}}async function u(){let t=await fetch("".concat(r,"/pages/pages.json"));if(!t.ok)throw Error("Failed to fetch pages list");return t.json()}async function p(t){let e=await fetch("".concat(r,"/").concat(t));if(!e.ok)throw Error("Failed to fetch page content: ".concat(t));let n=await e.json();return{...n,type:"page",headings:n.headings||[],createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString(),showInMenu:n.showInMenu||!1,menuOrder:n.menuOrder||0}}async function g(){let t=await fetch("".concat(r,"/home.json"));if(!t.ok)throw Error("Failed to fetch home content");return{...await t.json(),slug:"home",type:"page",headings:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),showInMenu:!0,menuOrder:0}}async function f(){let t=await fetch("".concat(r,"/templates/templates.json"));if(!t.ok)throw Error("Failed to fetch templates list");return t.json()}async function h(t){let e=await fetch("".concat(r,"/").concat(t));if(!e.ok)throw Error("Failed to fetch template content: ".concat(t));let n=await e.json();return{...n,type:"template",createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString()}}async function w(){let t=await fetch("".concat(r,"/snippets/snippets.json"));if(!t.ok)throw Error("Failed to fetch snippets list");return t.json()}async function m(t){let e=await fetch("".concat(r,"/").concat(t));if(!e.ok)throw Error("Failed to fetch snippet content: ".concat(t));let n=await e.json();return{...n,type:"snippet",createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString()}}async function v(){let t=await fetch("".concat(r,"/navigation/navigation.json"));if(!t.ok)throw Error("Failed to fetch navigation list");return t.json()}async function S(t){let e=await fetch("".concat(r,"/").concat(t));if(!e.ok)throw Error("Failed to fetch navigation content: ".concat(t));let n=await e.json();return{...n,type:"navigation",createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString()}}async function y(){try{let[t,e,n,a,o,i]=await Promise.all([s(),u(),f(),w(),v(),g()]),[r,c,l,y,D]=await Promise.all([Promise.all(t.components.map(t=>d(t.path))),Promise.all(e.pages.map(t=>p(t.path))),Promise.all(n.templates.map(t=>h(t.path))),Promise.all(a.snippets.map(t=>m(t.path))),Promise.all(o.navigation.map(t=>S(t.path)))]),j=[i,...c],I=new Date(Math.max(new Date(t.lastUpdated).getTime(),new Date(e.lastUpdated).getTime(),new Date(n.lastUpdated).getTime(),new Date(a.lastUpdated).getTime(),new Date(o.lastUpdated).getTime())).toISOString();return{pages:j,components:r,templates:l,snippets:y,navigation:D,lastUpdated:I}}catch(t){throw console.error("Error loading content:",t),t}}var D=n(6113);let j={name:"seb-io-content",version:1,store:"store"};class I{initDB(){return(0,D.P2)(j.name,j.version,{upgrade(t){t.objectStoreNames.contains(j.store)||t.createObjectStore(j.store)}})}async getStore(){if(this.db)try{return(await this.db).get(j.store,"content")}catch(t){console.error("Failed to get store:",t);return}}async setStore(t){if(this.db)try{let e=await this.db;await e.put(j.store,{...t,_lastChecked:new Date().toISOString()},"content")}catch(t){console.error("Failed to set store:",t)}}async clearStore(){if(this.db)try{let t=await this.db;await t.clear(j.store)}catch(t){console.error("Failed to clear store:",t)}}constructor(){this.db=null,this.db=this.initDB()}}let O=new I,A={pages:[],components:[],templates:[],snippets:[],navigation:[],lastUpdated:""};function C(){let[t,e]=(0,a.useState)(!1),[n,o]=(0,a.useState)(A),i=(0,a.useCallback)(async()=>{try{let t=O?await O.getStore():null;if(t)o(t);else{let t=await y();O&&await O.setStore(t),o(t)}e(!0)}catch(t){console.error("Failed to initialize content store:",t);try{let t=await y();o(t),e(!0)}catch(t){console.error("Failed to load content:",t)}}},[]);(0,a.useEffect)(()=>{i()},[i]);let r=(0,a.useMemo)(()=>({getPage:t=>n.pages.find(e=>e.slug===t),getPages:t=>{let e=n.pages;return(null==t?void 0:t.filter)&&(e=e.filter(t.filter)),(null==t?void 0:t.sort)&&(e=e.sort(t.sort)),e},getMenuItems:()=>n.pages.filter(t=>t.showInMenu).sort((t,e)=>(t.menuOrder||0)-(e.menuOrder||0)),getComponent:t=>n.components.find(e=>e.slug===t),getComponents:t=>{let e=n.components;return(null==t?void 0:t.filter)&&(e=e.filter(t.filter)),(null==t?void 0:t.sort)&&(e=e.sort(t.sort)),e},getComponentImage:(t,e)=>{var a;let o=n.components.find(e=>e.slug===t);return null==o||null==(a=o.images)?void 0:a.find(t=>t.id===e)},getComponentImages:t=>{let e=n.components.find(e=>e.slug===t);return(null==e?void 0:e.images)||[]},getIcon:t=>{var e;let a=n.components.find(t=>"icon"===t.slug);return null==a||null==(e=a.icons)?void 0:e[t]},getIcons:t=>{let e=n.components.find(t=>"icon"===t.slug);if(!(null==e?void 0:e.icons))return[];let a=Object.values(e.icons);return(null==t?void 0:t.filter)&&(a=a.filter(t.filter)),(null==t?void 0:t.sort)&&(a=a.sort(t.sort)),a},getIconsByCategory:t=>{let e=n.components.find(t=>"icon"===t.slug);return(null==e?void 0:e.icons)?Object.values(e.icons).filter(e=>e.meta.categories.includes(t)):[]},searchIcons:t=>{let e=n.components.find(t=>"icon"===t.slug);if(!(null==e?void 0:e.icons))return[];let a=t.toLowerCase();return Object.values(e.icons).filter(t=>t.displayName.toLowerCase().includes(a)||t.meta.tags.some(t=>t.toLowerCase().includes(a)))},getTemplate:t=>n.templates.find(e=>e.slug===t),getTemplates:t=>{let e=n.templates;return(null==t?void 0:t.filter)&&(e=e.filter(t.filter)),(null==t?void 0:t.sort)&&(e=e.sort(t.sort)),e},getSnippet:t=>n.snippets.find(e=>e.slug===t),getSnippets:t=>{let e=n.snippets;return(null==t?void 0:t.filter)&&(e=e.filter(t.filter)),(null==t?void 0:t.sort)&&(e=e.sort(t.sort)),e},getNavigation:t=>n.navigation.find(e=>e.slug===t),getNavigations:t=>{let e=n.navigation;return(null==t?void 0:t.filter)&&(e=e.filter(t.filter)),(null==t?void 0:t.sort)&&(e=e.sort(t.sort)),e},validateCache:async()=>{try{let[t,e,a,o,i]=await Promise.all([s(),u(),f(),w(),v()]),c=new Date(n.lastUpdated);new Date(Math.max(new Date(t.lastUpdated).getTime(),new Date(e.lastUpdated).getTime(),new Date(a.lastUpdated).getTime(),new Date(o.lastUpdated).getTime(),new Date(i.lastUpdated).getTime()))>c&&await r.refresh()}catch(t){console.error("Failed to validate cache:",t)}},refresh:async()=>{let t=await y();O&&await O.setStore({...t,_lastChecked:new Date().toISOString()}),o(t)}}),[n]);return(0,a.useEffect)(()=>{t&&r.validateCache()},[t]),{isLoaded:t,store:n,actions:r}}function F(){let t=(0,a.useContext)(o);if(!t)throw Error("useContentContext must be used within ContentProvider");return t}function k(t){let{children:e,loading:n=!1,fallback:r=null,onLoad:s}=t,c=C();return((0,a.useEffect)(()=>{c.isLoaded&&(null==s||s())},[c.isLoaded,s]),!c.isLoaded||n)?r:(0,i.jsx)(o.Provider,{value:c,children:e})}}}]);